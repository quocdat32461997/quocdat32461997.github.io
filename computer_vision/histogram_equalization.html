---
layout: default
---

<h1> Histogram Equalization - Enhancing Image Contrast </h1>

<p>Enhancing image contrast is a common task in Photoshop to improve the image quality,
and to improve the image beauty. Let's look at 2 images below.</p>

<img src = "statics/bef_hist_eq.jpg"/>
<img src = "statics/after_hist_eq.jpg"/>

<p>Obviously, the second image looks more attractive than the "boring" image. One method of
enhancing contrast is Histogram Euqalization. Of course, there are tons of more powerful algorithms designed by Adobe and other companies.
However, I choose to talk about this algorithm because it is a good example to teach people what histogram is and how to read it.</p>

<section id = "histofram">
  <h3>Histogram</h3>
  <p id = "hist_in_computer_vision">
    <img src = "statics/hist_bef.png"/>
    <b style = "margin: auto;"> Histogram Sample of an Image</b> <br> <br>

    In Computer Vision, every image is composed of pixels that every color of pixels ranges from 0 to 255 (0 is darkesst and 255 is brightest).
    A color mode of images are RGB (e.g. 3 color channels of Reg-Green-Blue).
    <br> <br>
    In the histogram sample, the vertical axis represent the number of pixels and the horizontal axis represents brightness of a color channel.
    The histogram of an image tells how the color strength and the color distribution in the image.
    In the histogram sample, it has the bell shape that red columns are closely placed in the center (150 - 200). This observation
    tells me that pixels in the image are not clearly different in colors. In other words, the image contrast is low.
    <br><br>
    <b> Want to enhance the image contrast</b>
  </p>

  <h3> Enhacing Image Contrast by Histogram Equalization </h3>
  <p id = "histogram_equalization">
    The histogram sample shows that the low image contrast is due to the closely-packed distribution of the color frequency. In order to increaes the image contrast,
    the color frequency (histogram) must be stretched out so that the colors of pixels are apart from others. In other words, pixels will have clearly different colors.
    <br>
    <ul>
      <li>
        <b>Linear Scaling</b> - a basic method to stretch the histogram by mapping the smallest and largest colors to 0 and 255 respectively. Hence, this method may not work when
        the histogram has extreme outliners. One solution is to remove the outliners which are not preffered because engineers want to reserve all pixels.
        <img src = "statics/linear_scaling_formula.png"/>
      </li>
      <li><b>Histogram Equalization</b> - a better method to stretch out the histogram based on the cumulate histogram. More details can be found <a href = "https://www.math.uci.edu/icamp/courses/math77c/demos/hist_eq.pdf"> here. </a> </li>
    </ul>
  </p>

  <h3> Histogram Equalization </h3>
  <img src = "statics/hist_after.png"/>
  <p>
    <b style = "font-size: 12px;"> Histogram and Image sample after Histogram Equalization</b>
    <br> <br>
    <b> Steps to perform Histogram Equalization </b>
    <ul>
      <li> Build Histogram that could be done by mapping frequency of pixel colors to a dictionary that keys are colors and values are the pixels belong to the color.</li>
      <li> Build the Cummulative Histogram (CH) by adding the previous color frequency for the next one and so on.</li>
      <li> Calculate the Normalized Cummulative Histogram (NCH) by multiplying CH with the coefficient: <br>
        K / (2 * N) that K is the possible colors (usually from 0 to 255) and N is the image size</li>
      <li> Compute the floor of the NCH to the nearest integer</li>
    </ul>
    <img src = "statics/hist_eq_formula.png"/>
  </p>
</section>

<section id = "mocv">
  I implemented Histogram Equalization and other Computer Vision algorithms are in <b> <a href = "https://github.com/quocdat32461997/MoCV"> MoCV </a> </b> along with my Computer Vision course and my side projects in Deep Learning with Computer Vision.
  Feel free to contribute and fix me. 
</section>
